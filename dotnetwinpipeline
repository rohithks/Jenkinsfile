pipeline {

    agent { node { label 'master' } }
    stage('Publish artifacts') {
        steps {
            script {
            def buildVersion = currentBuild.number

            def artifactory = Artifactory.server 'Artifactory'
            
            def artifactSpec = toJson([
              files: [
                [
                  pattern: "${env.Nupkg_Path}/1-hello-world.1.0.0.nupkg "
                  target: "mahesh123"
                ]
            ])
            artifactory.upload spec: artifactSpec

            def buildInfo = artifactory.upload artifactSpec
            artifactory.publishBuildInfo buildInfo
            }
        }
    }
}
 
